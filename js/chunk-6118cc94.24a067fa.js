(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6118cc94"],{"0537":function(t,e,r){},"1f13":function(t,e,r){"use strict";var n=r("0537"),o=r.n(n);o.a},"96cf":function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(C){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),i=new q(n||[]);return a._invoke=D(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(C){return{type:"throw",arg:C}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function m(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(_([])));x&&x!==r&&n.call(x,a)&&(b=x);var I=m.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function B(t,e){function r(o,a,i,s){var u=l(t[o],t,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(f).then((function(t){c.value=t,i(c)}),(function(t){return r("throw",t,i,s)}))}s(u.arg)}var o;function a(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}this._invoke=a}function D(t,e,r){var n=f;return function(o,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw a;return j()}r.method=o,r.arg=a;while(1){var i=r.delegate;if(i){var s=L(i,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?p:h,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}function L(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var r=t[a];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){while(++o<t.length)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:j}}function j(){return{value:e,done:!0}}return y.prototype=I.constructor=m,m.constructor=y,y.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(I),t},t.awrap=function(t){return{__await:t}},S(B.prototype),B.prototype[i]=function(){return this},t.AsyncIterator=B,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new B(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(I),u(I,s,"Generator"),I[a]=function(){return this},I.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},bf5c:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"player"}},[r("home-button"),r("p",{staticClass:"ma-2 text-h4 font-weight-thin",attrs:{color:"info"}},[t._v("ID:"+t._s(t.bingoId))]),r("div",{staticClass:"d-flex justify-center ma-2"},[r("table",{attrs:{border:"1",bordercolor:"#2c3e50"}},t._l(5,(function(e){return r("tr",{key:e},t._l(5,(function(n){return r("td",{key:n,staticClass:"square",class:[{filled:t.squares[n-1][e-1].isFilled},t.squares[n-1][e-1].status],on:{click:function(r){return t.switchSquareFilled(n-1,e-1,t.squares)}}},[t._v(t._s(t.squares[n-1][e-1].number))])})),0)})),0)]),r("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"primary","x-small":""}},"v-btn",o,!1),n),[t._v(" New Bingo Game ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",[t._v("New Bingo Game")])]),r("v-card-text",[r("v-container",[r("v-text-field",{attrs:{label:"Bingo ID",required:""},model:{value:t.bingoId,callback:function(e){t.bingoId=e},expression:"bingoId"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.createBingoCard(t.bingoId)}}},[t._v("Start")])],1)],1)],1)],1)},o=[];r("4160"),r("fb6a"),r("159b"),r("96cf"),r("d3b7");function a(t,e,r,n,o,a,i){try{var s=t[a](i),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){a(i,n,o,s,u,"next",t)}function u(t){a(i,n,o,s,u,"throw",t)}s(void 0)}))}}const s=(t,e)=>e.some(e=>t instanceof e);let u,c;function l(){return u||(u=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f(){return c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,g=new WeakMap;function y(t){const e=new Promise((e,r)=>{const n=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(S(t.result)),n()},a=()=>{r(t.error),n()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(e=>{e instanceof IDBCursor&&h.set(e,t)}).catch(()=>{}),g.set(e,t),e}function m(t){if(d.has(t))return;const e=new Promise((e,r)=>{const n=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),n()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});d.set(t,e)}let b={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return d.get(t);if("objectStoreNames"===e)return t.objectStoreNames||p.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return S(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function w(t){b=t(b)}function x(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?f().includes(t)?function(...e){return t.apply(B(this),e),S(h.get(this))}:function(...e){return S(t.apply(B(this),e))}:function(e,...r){const n=t.call(B(this),e,...r);return p.set(n,e.sort?e.sort():[e]),S(n)}}function I(t){return"function"===typeof t?x(t):(t instanceof IDBTransaction&&m(t),s(t,l())?new Proxy(t,b):t)}function S(t){if(t instanceof IDBRequest)return y(t);if(v.has(t))return v.get(t);const e=I(t);return e!==t&&(v.set(t,e),g.set(e,t)),e}const B=t=>g.get(t);function D(t,e,{blocked:r,upgrade:n,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),s=S(i);return n&&i.addEventListener("upgradeneeded",t=>{n(S(i.result),t.oldVersion,t.newVersion,S(i.transaction))}),r&&i.addEventListener("blocked",()=>r()),s.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",()=>o())}).catch(()=>{}),s}const L=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],E=new Map;function q(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(E.get(e))return E.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,o=k.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!L.includes(r))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;n&&(i=i.index(e.shift()));const s=await i[r](...e);return o&&await a.done,s};return E.set(e,a),a}w(t=>({...t,get:(e,r,n)=>q(e,r)||t.get(e,r,n),has:(e,r)=>!!q(e,r)||t.has(e,r)}));const _=["continue","continuePrimaryKey","advance"],j={},C=new WeakMap,O=new WeakMap,F={get(t,e){if(!_.includes(e))return t[e];let r=j[e];return r||(r=j[e]=function(...t){C.set(this,O.get(this)[e](...t))}),r}};async function*T(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,F);O.set(r,e),g.set(r,B(e));while(e)yield r,e=await(C.get(r)||e.continue()),C.delete(r)}function N(t,e){return e===Symbol.asyncIterator&&s(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&s(t,[IDBIndex,IDBObjectStore])}w(t=>({...t,get(e,r,n){return N(e,r)?T:t.get(e,r,n)},has(e,r){return N(e,r)||t.has(e,r)}}));var P=r("e1c9"),R={name:"Player",data:function(){return{bingoId:"",dialog:!1,squares:[[],[],[],[],[]]}},components:{HomeButton:P["a"]},created:function(){var t=i(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.squares=this.getNewSquares(),e=this.$route.query.bingoId,void 0!==e){t.next=8;break}return t.next=5,this.getLatestBingoId();case 5:this.bingoId=t.sent,t.next=9;break;case 8:this.bingoId=e;case 9:null===this.bingoId?this.dialog=!0:this.createBingoCard(this.bingoId);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getLatestBingoId:function(){var t=i(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getBingoObjectStore();case 2:return e=t.sent,t.next=5,e.count();case 5:if(t.t0=t.sent,0!==t.t0){t.next=8;break}return t.abrupt("return",null);case 8:return t.next=10,e.index("updateDateTime");case 10:return r=t.sent,t.next=13,r.openCursor(null,"prev");case 13:return n=t.sent,t.next=16,n.value.bingoId;case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createBingoCard:function(){var t=i(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getBingoObjectStore();case 2:return r=t.sent,t.next=5,r.get(e);case 5:return n=t.sent,t.next=8,n;case 8:if(t.t0=t.sent,t.t1=void 0,t.t0!==t.t1){t.next=18;break}return t.next=13,this.getNewSquares();case 13:return this.squares=t.sent,t.next=16,r.add({bingoId:e,squares:this.squares,updateDateTime:(new Date).getTime()});case 16:t.next=21;break;case 18:return t.next=20,n.squares;case 20:this.squares=t.sent;case 21:this.dialog=!1;case 22:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),saveBingoCard:function(){var t=i(regeneratorRuntime.mark((function t(e,r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getBingoObjectStore();case 2:return n=t.sent,t.next=5,{bingoId:e,squares:r,updateDateTime:(new Date).getTime()};case 5:return o=t.sent,t.next=8,n.put(o);case 8:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),getBingoObjectStore:function(){var t=i(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.openBingoDb();case 2:return e=t.sent,t.next=5,e.transaction("bingocards","readwrite");case 5:return r=t.sent,t.next=8,r.objectStore("bingocards");case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openBingoDb:function(){var t=i(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D("BingoDatabase",1,{upgrade:function(t){var e=t.createObjectStore("bingocards",{keyPath:"bingoId"});e.createIndex("updateDateTime","updateDateTime")}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getNewSquares:function(){for(var t=[[],[],[],[],[]],e=1,r=15,n=0;n<5;n++)t[n]=this.initCol(e,r),e+=15,r+=15;return t[2][2]={number:"★",isFilled:!0,status:""},t},initCol:function(t,e){for(var r=[],n=t;n<=e;n++)r.push({number:n,isFilled:!1,status:""});for(var o=r.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1)),i=r[o];r[o]=r[a],r[a]=i}return r.slice(0,5)},switchSquareFilled:function(t,e,r){2===t&&2===e||(r[t][e].isFilled?confirm("このマスを戻しますか？")&&(r[t][e].isFilled=!1):r[t][e].isFilled=!0,this.resetAllSquaresStatus(r),this.updateSquaresVertical(r),this.updateSquaresHorizonal(r),this.updateSquaresDiagonal(r),this.refreshAllSquares(r),this.saveBingoCard(this.bingoId,r))},updateSquaresVertical:function(t){for(var e=0;e<5;e++){var r=this.countFilled(t[e]);this.updateStatus(t[e],r)}},updateSquaresHorizonal:function(t){for(var e=0;e<5;e++){for(var r=[],n=0;n<5;n++)r.push(t[n][e]);var o=this.countFilled(r);this.updateStatus(r,o)}},updateSquaresDiagonal:function(t){for(var e=[],r=[],n=[],o=0;o<5;o++)e.push(t[o][o]),r.push(t[o][4-o]),n=[e,r];for(var a=0;a<n.length;a++){var i=this.countFilled(n[a]);this.updateStatus(n[a],i)}},countFilled:function(t){var e=0;return t.forEach((function(t){t.isFilled&&e++})),e},updateStatus:function(t,e){var r;if(4===e)r="reach";else{if(5!==e)return;r="bingo"}for(var n=0;n<5;n++)if(t[n].isFilled){if("bingo"===t[n].status)continue;t[n].status=r}},resetAllSquaresStatus:function(t){for(var e=0;e<5;e++)for(var r=0;r<5;r++)t[e][r].status=""},refreshAllSquares:function(t){this.squares=t}}},V=R,A=(r("1f13"),r("2877")),M=r("6544"),G=r.n(M),W=r("8336"),K=r("b0af"),H=r("99d9"),$=r("a523"),z=r("169a"),J=r("2fa4"),Y=r("8654"),Q=Object(A["a"])(V,n,o,!1,null,null,null);e["default"]=Q.exports;G()(Q,{VBtn:W["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:$["a"],VDialog:z["a"],VSpacer:J["a"],VTextField:Y["a"]})}}]);
//# sourceMappingURL=chunk-6118cc94.24a067fa.js.map